(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[6785],{141482:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;p(n(667294));var r,a=d(n(270139)),o=p(n(72840)),i=n(770348),u=n(478036),l=d(n(247001)),s=d(n(223244)),c=d(n(762530));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}function v(e,t,n,a){
r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){var t=e.title,r=e.onVerify,d=e.authBoxClassName,f=e.captchaService,p=void 0===f?i.CaptchaTypes.RECAPTCHA:f,m=e.sitekey;return v(o.default,{className:d},void 0,v("img",{alt:"",src:n(148267),className:c.default.marginBottom20}),null!=t?v(o.Title,{className:c.default.marginBottom8},void 0,t):null,v(o.SubTitle,{className:c.default.marginBottom40},void 0,l.default.Messages.BEEP_BOOP),v("div",{className:s.default.flexCenter},void 0,v(a.default,{onVerify:r,theme:u.ThemeTypes.DARK,captchaService:p,sitekey:m})))};m.displayName="AuthCaptcha";var h=m;t.default=h},
801635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.GiftCodeResolvingHeader=void 0;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=E(n(294184)),i=E(n(536211)),u=E(n(288356)),l=E(n(728429)),s=E(n(909584)),c=E(n(399561)),d=E(n(562475)),f=n(72840),p=n(537683),v=n(770348),m=E(n(247001)),h=E(n(57361)),_=E(n(223244)),g=E(n(762530));function E(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function N(e,t,n,a){
r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(){return N(a.Fragment,{},void 0,N(f.Avatar,{src:null,size:f.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),N(f.SubTitle,{},void 0,m.default.Messages.GIFT_CODE_AUTH_GIFTED),N(f.Title,{className:(0,o.default)(g.default.marginTop8,_.default.flexCenter)},void 0,m.default.Messages.LOADING))};t.GiftCodeResolvingHeader=I;I.displayName="GiftCodeResolvingHeader";var T=function(e){var t=e.error,n=e.gifter,r=e.sku,i=e.application,u=e.subscriptionPlan,l=null==n?m.default.Messages.GIFT_CODE_AUTH_GIFTED:m.default.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({
username:n.username}),s=r.name;null!=u&&(s=(u.interval===v.SubscriptionIntervalTypes.MONTH?m.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:m.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:r.name,intervalCount:u.intervalCount}));return N(a.Fragment,{},void 0,N(f.Avatar,{src:null!=n?n.getAvatarURL(void 0,100):null,size:f.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),null!=t?N(a.Fragment,{},void 0,N(f.SubTitle,{},void 0,m.default.Messages.INVITE_MODAL_ERROR_TITLE),N(f.Title,{},void 0,t)):N(a.Fragment,{},void 0,N(f.SubTitle,{},void 0,l),N(f.Title,{className:(0,o.default)(g.default.marginTop8,_.default.flexCenter)},void 0,N(d.default,{size:d.default.Sizes.MEDIUM,className:h.default.applicationIcon,game:i,skuId:r.id}),s)))};T.displayName="GiftCodeHeader";var O=i.default.connectStores([c.default,u.default,s.default,l.default],(function(e){var t=e.giftCode,n=c.default.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,
subscriptionPlan:null!=r?(0,p.getOrFetchSubscriptionPlan)(r):null,application:u.default.getGame(n.applicationId),gifter:l.default.getUser(t.userId)}}))(T);t.default=O},900993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.InviteResolvingHeader=void 0;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r
}(n(667294)),o=n(536211),i=T(n(915574)),u=T(n(331119)),l=T(n(567186)),s=T(n(539563)),c=T(n(759027)),d=T(n(728429)),f=T(n(562475)),p=T(n(189950)),v=T(n(730977)),m=n(72840),h=T(n(272544)),_=T(n(776360)),g=n(770348),E=n(485280),y=n(738681),N=T(n(247001)),I=T(n(503841));function T(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var A=function(){return S(a.Fragment,{},void 0,S(m.Avatar,{src:null,size:m.Avatar.Sizes.DEPRECATED_SIZE_100,
className:I.default.avatar}),S(m.SubTitle,{},void 0,N.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN),S(m.Title,{className:I.default.inviteResolvingGuildName},void 0,N.default.Messages.LOADING))};t.InviteResolvingHeader=A;A.displayName="InviteResolvingHeader";var C=function(e){var t=e.guild,n=e.user,r=e.application,a=e.compact;return r?S(f.default,{className:I.default.appIcon,game:r,size:I.default.appIconSize}):n?S(m.Avatar,{src:null!=n?n.getAvatarURL(void 0,80):null,size:m.Avatar.Sizes.SIZE_80,className:a?I.default.compactAvatar:I.default.avatar}):t?S(h.default,{mask:h.default.Masks.SQUIRCLE,width:64,height:64,className:I.default.guildIcon},void 0,S(m.GuildIcon,{guild:t,size:m.GuildIcon.Sizes.LARGER,animate:!0})):null},R=function(e){var t,n=e.invite,r=e.disableUser,f=void 0!==r&&r,h=e.error,T=e.flatActivityCount,O=void 0!==T&&T,A=e.isRegister,R=void 0!==A&&A,M=(0,o.useStateFromStoresObject)([i.default,d.default],(function(){return{currentUser:d.default.getCurrentUser(),
multiAccounts:i.default.getUsers()}})),b=M.currentUser,P=M.multiAccounts;if(null==n)return null;var L,w,D,k=null!=n.guild?new s.default(n.guild):null,U=null!=n.channel?new l.default(n.channel):null,G=null!=n.target_application?new u.default(n.target_application):null,B=f||null==n.inviter?null:new c.default(n.inviter),F=!(null!=n.approximate_member_count&&n.approximate_member_count>100||null!=k&&k.hasFeature(g.GuildFeatures.COMMUNITY))&&B,j=null,x=!1;if(null!=k){j=null==B?N.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN:N.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:B.username});n.target_type===y.InviteTargetTypes.STREAM&&null!=n.target_user&&(j=N.default.Messages.AUTH_MESSAGE_INVITED_TO_STREAM.format({username:n.target_user.username}));n.target_type===y.InviteTargetTypes.EMBEDDED_APPLICATION&&null!=n.target_application&&(j=null!=B?N.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY_USERNAME.format({username:B.username
}):N.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY);F&&null==G&&(L=S(m.GuildIcon,{guild:k,size:m.GuildIcon.Sizes.SMALL}));w=k.name;if(null!=G){w=G.name;D=S("div",{},void 0,S(m.SubTitle,{className:I.default.appIn},void 0,N.default.Messages.EMBEDDED_ACTIVITIES_INVITE_IN),S("div",{className:I.default.guildContainer},void 0,S(m.GuildIcon,{guild:k,size:m.GuildIcon.Sizes.SMALL}),S(_.default,{className:I.default.appGuildName,color:_.default.Colors.CUSTOM,tag:"span",size:_.default.Sizes.SIZE_24},void 0,k.name)))}}else if(null!=U){if(null==B)throw new Error("no inviter in group DM invite");var H=B.username;if(U.name){j=N.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:H});w=U.name;null!=U.icon&&(L=S(m.ChannelIcon,{channel:U,size:m.Avatar.Sizes.SIZE_32}))}else{j=N.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM;w=H}}else if(null!=B){w=N.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_CHAT.format({username:B.username});x=!0;D=h?null:S(m.SubTitle,{
className:I.default.directInviteSubTitle},void 0,R?N.default.Messages.INSTANT_INVITE_DIRECT_FRIEND_DESCRIPTION_REGISTER.format({username:B.username+"#"+B.discriminator}):N.default.Messages.INSTANT_INVITE_DIRECT_FRIEND_DESCRIPTION.format({username:B.username+"#"+B.discriminator}))}return S("div",{className:I.default.container},void 0,S(C,{application:G,guild:k,user:F?B:null,compact:x}),h?a.createElement(a.Fragment,null,S(m.SubTitle,{},void 0,N.default.Messages.INVITE_MODAL_ERROR_TITLE),S(m.Title,{},void 0,h)):a.createElement(a.Fragment,null,S(m.SubTitle,{},void 0,j),S(m.Title,{className:I.default.title},void 0,null!=k?S(p.default,{guild:k,className:I.default.guildBadge,tooltipPosition:v.default.Positions.LEFT}):null,L,w)),D,null!=G||x||(null==n||null===(t=n.guild)||void 0===t?void 0:t.id)===E.INVITE_ROUTING_HUB_GUILD_ID?null:S(m.ActivityCount,{className:I.default.activityCount,online:n.approximate_presence_count,total:n.approximate_member_count,flat:O}),P.length>1?S(m.JoiningAs,{user:b
}):null)};R.displayName="InviteHeader";var M=R;t.default=M},20757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=W(n(667294)),o=x(n(294184)),i=n(517563),u=n(171236),l=n(536211),s=x(n(939949)),c=n(241889),d=x(n(250950)),f=x(n(685528)),p=x(n(405141)),v=x(n(915574)),m=x(n(165635)),h=x(n(947472)),_=x(n(864062)),g=x(n(50459)),E=n(887299),y=x(n(423046)),N=x(n(203855)),I=x(n(544196)),T=x(n(530250)),O=W(n(72840)),S=x(n(916417)),A=x(n(502197)),C=n(194322),R=x(n(776360)),M=x(n(308920)),b=n(429873),P=n(956506),L=x(n(141482)),w=x(n(801635)),D=W(n(900993)),k=x(n(721097)),U=x(n(543188)),G=n(770348),B=x(n(247001)),F=x(n(688780)),j=x(n(762530));function x(e){return e&&e.__esModule?e:{default:e}}function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(H=function(e){return e?n:t})(e)}function W(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=H(t)
;if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}function V(){V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return V.apply(this,arguments)}function K(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function z(e,t,n,r,a,o,i){try{
var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){z(o,r,a,i,u,"next",e)}function u(e){z(o,r,a,i,u,"throw",e)}i(void 0)}))}}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function $(e,t){$=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return $(e,t)}var q=K(O.AuthSpinner,{}),Q=K(D.InviteResolvingHeader,{}),J=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;$(e,t)}(t,e);function t(t){var n;(n=e.call(this,t)||this).handleAuthToken=function(){var e=Y(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return s.default.loginToken(t,!1);case 2:
M.default.track(G.AnalyticEvents.LOGIN_SUCCESSFUL,{source:G.LoginSuccessfulSources.QR_CODE,login_source:n.loginSource,gift_code_sku_id:n.giftCodeSKUId,is_new_user:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.setLoginRef=function(e){n.loginRef=e};n.setPasswordRef=function(e){n.passwordRef=e};n.setCodeRef=function(e){n.codeRef=e};n.getFullLogin=function(){var e=n.state;return e.loginPrefix+e.login};n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};n.handleLogin=function(e){var t=n.state,r=t.password,a=t.captchaKey,o=t.undelete;null!=e&&e.preventDefault();n.setState({captchaCallback:n.handleLogin,captchaKey:null});s.default.login({login:n.getFullLogin(),password:r,undelete:o,captchaKey:a,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId,invite:n.props.invite});P.ComponentDispatch.dispatch(G.ComponentActions.WAVE_EMPHASIZE)};n.handleIPAuthorize=function(){
var e=Y(regeneratorRuntime.mark((function e(t){var r,a,o,i,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.state,a=r.password,o=r.captchaKey,i=r.undelete;n.setState({phoneVerifyError:null,captchaKey:null});u=n.getFullLogin();e.prev=3;e.next=6;return h.default.verifyPhone(u,t,!1);case 6:l=e.sent;c=l.token;e.next=10;return s.default.authorizeIPAddress(c);case 10:s.default.login({login:u,password:a,undelete:i,captchaKey:o,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId});P.ComponentDispatch.dispatch(G.ComponentActions.WAVE_EMPHASIZE);e.next=17;break;case 14:e.prev=14;e.t0=e.catch(3);null!=e.t0.body&&null!=e.t0.body.message&&n.setState({phoneVerifyError:e.t0.body.message});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();n.handlePasswordReset=function(){var e=Y(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){
case 0:r=n.props.transitionTo;n.setState({phoneVerifyError:null});e.prev=2;e.next=5;return h.default.verifyPhone(n.getFullLogin(),t,!1);case 5:a=e.sent;o=a.token;r(G.Routes.RESET,{search:(0,i.stringify)({token:o,from_login:"true"})});e.next=13;break;case 10:e.prev=10;e.t0=e.catch(2);null!=e.t0.body&&null!=e.t0.body.message&&n.setState({phoneVerifyError:e.t0.body.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();n.handleTokenSubmit=function(e){var t=n.state.code,r=n.props.mfaTicket;null!=e&&e.preventDefault();s.default.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId});P.ComponentDispatch.dispatch(G.ComponentActions.WAVE_EMPHASIZE)};n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault();s.default.loginSMS({code:t.replace(/ /g,""),ticket:r});P.ComponentDispatch.dispatch(G.ComponentActions.WAVE_EMPHASIZE)}
;n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault();s.default.requestSMSToken(t);P.ComponentDispatch.dispatch(G.ComponentActions.WAVE_EMPHASIZE)};n.handleForgotPassword=function(){var e=Y(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=t&&t.preventDefault();null!=n.loginRef&&n.loginRef.focus();r=n.getFullLogin();o=n.state.captchaKey;n.setState({captchaCallback:n.handleForgotPassword,captchaKey:null});e.prev=5;P.ComponentDispatch.dispatch(G.ComponentActions.WAVE_EMPHASIZE);e.next=9;return s.default.forgotPassword(r,o);case 9:(0,C.openModal)((function(e){return a.createElement(A.default,V({header:B.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:B.default.Messages.OKAY,confirmButtonColor:O.Button.Colors.BRAND,className:u.isMobile?F.default.mobile:""},e),K(R.default,{size:R.default.Sizes.SIZE_16
},void 0,B.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:r})))}));e.next=14;break;case 12:e.prev=12;e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();n.handleResendCode=function(){h.default.resendCode(n.getFullLogin())};n.handleReset=function(e){null!=e&&e.preventDefault();s.default.loginReset();n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",captchaKey:null,undelete:!1,checkingHandoff:!1})};n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)};n.handleCaptchaVerify=function(e){var t=n.state.captchaCallback;n.setState({captchaKey:e},t)};n.handleGotoRegister=function(){var e=n.state.login,t=n.props,r=t.invite,a=t.giftCode,o=t.closeLogin,u=t.openRegister,l=t.guildTemplate,c=t.location,d=t.transitionTo,f=t.redirectTo;if(t.isGuest){void 0!==o&&o();void 0!==u&&u()}else{var p,v=null!=c?(0,i.parse)(c.search):{};""!==e&&(v.email=e);if(null!=r){
v.mode="register";p=G.Routes.INVITE(r.code)}else if(null!=a){v.mode="register";p=G.Routes.GIFT_CODE(a.code)}else if(null!=l)p=G.Routes.GUILD_TEMPLATE(l.code);else if(null!=f){p=G.Routes.REGISTER;v.redirect_to=f}else p=G.Routes.REGISTER;s.default.loginReset();d(p,{search:(0,i.stringify)(v)});P.ComponentDispatch.dispatch(G.ComponentActions.WAVE_EMPHASIZE)}};var r=null!=t.location?(0,i.parse)(t.location.search):{};n.state={redirecting:t.authenticated,checkingHandoff:t.handoffAvailable,loginPrefix:"",login:r.email||r.login||"",password:"",code:"",smsCode:"",captchaKey:null,captchaCallback:n.handleLogin,undelete:!1,phoneVerifyError:null,dismissedChooseAccount:!1};return n}t.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};var r=t.prototype;r.componentDidMount=function(){var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,a=e.invite,o=e.location;t&&!n?(0,c.handoffBegin)():n&&this.loginOrSSO(n,o,!0)
;M.default.track(G.AnalyticEvents.LOGIN_VIEWED,V({location:null!=a?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource},null!=r?(0,f.default)(r,!1,!1):{}),{flush:!0});s.default.getLocationMetadata();(0,E.trackAppUIViewed)("login")};r.componentDidUpdate=function(e){var t=this.props,n=t.authenticated,r=t.location,a=this.state.checkingHandoff;!n||e.authenticated||a||this.loginOrSSO(n,r);if(e.errors!==this.props.errors)if(this.hasError("password")){var o;null===(o=this.passwordRef)||void 0===o||o.focus()}else if(this.hasError("email")||this.hasError("login")){var i;null===(i=this.loginRef)||void 0===i||i.focus()}else if(this.hasError("code")){var u;null===(u=this.codeRef)||void 0===u||u.focus()}};r.loginOrSSO=function(e,t,n){var r=this;void 0===n&&(n=!1);var a=this.props.isGuest;e&&(null!=t||a)&&(n?s.default.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t))};r.transitionSSO=function(e){
var t=this.props,n=t.transitionTo,r=t.redirectTo;if(t.isGuest&&null!=r)n(r);else{var a=null!=e?(0,i.parse)(e.search):{};delete a.redirect_to;if(null!=r)n(r);else if(null==a.service)n(G.Routes.APP);else{var o=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+G.Endpoints.SSO,u=V({},a,{token:y.default.getToken()});window.location=o+"?"+(0,i.stringify)(u)}}};r.hasError=function(e){return null!=this.props.errors[e]};r.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return K(O.default,{className:e},void 0,q,K(O.Title,{className:j.default.marginBottom8},void 0,B.default.Messages.BROWSER_HANDOFF_DETECTING_TITLE),K(O.SubTitle,{},void 0,B.default.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION))};r.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,r=e.authBoxClassName;return null==t?null:K(O.default,{className:r},void 0,K(O.Avatar,{src:t.getAvatarURL(void 0,100),size:O.Avatar.Sizes.DEPRECATED_SIZE_100,className:j.default.marginBottom20
}),K(O.Title,{className:j.default.marginBottom8},void 0,B.default.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})),K(O.SubTitle,{className:j.default.marginBottom40},void 0,B.default.Messages.BROWSER_HANDOFF_SUCCESS_BODY),K(O.Block,{},void 0,K(O.Button,{onClick:function(){return n(G.Routes.APP)},className:j.default.marginBottom8},void 0,B.default.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})),K(O.Button,{look:O.Button.Looks.LINK,color:O.Button.Colors.LINK,onClick:this.handleReset},void 0,B.default.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL)))};r.renderDisabledAccount=function(){var e=this.props.authBoxClassName,t=this.props.loginStatus===G.LoginStates.ACCOUNT_DISABLED,n=t?B.default.Messages.ACCOUNT_DISABLED_TITLE:B.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,r=t?B.default.Messages.ACCOUNT_DISABLED_DESCRIPTION:B.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return K(O.default,{tag:"form",onSubmit:this.handleReset,className:e
},void 0,K(O.Title,{className:j.default.marginBottom8},void 0,n),K(O.SubTitle,{className:j.default.marginBottom20},void 0,r),K(O.Block,{},void 0,K(O.Button,{color:O.Button.Colors.BRAND,type:"submit"},void 0,B.default.Messages.RETURN_TO_LOGIN),K("div",{className:(0,o.default)(j.default.marginTop8,F.default.needAccount)},void 0,B.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion}))))};r.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,r=t.country;return K(O.default,{className:n},void 0,Q,K(O.Block,{className:j.default.marginTop20},void 0,K(g.default,{className:j.default.marginBottom20,alpha2:r.alpha2,countryCode:r.code.split(" ")[0],label:B.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!0}),K(O.Input,{className:j.default.marginBottom20,
label:B.default.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password}),K(O.Button,{className:j.default.marginBottom8,type:"submit",disabled:!0},void 0,B.default.Messages.LOGIN),K(O.Button,{disabled:!0,look:O.Button.Looks.LINK,color:O.Button.Colors.LINK},void 0,B.default.Messages.FORGOT_PASSWORD),K(O.Button,{disabled:!0,className:j.default.marginTop4,look:O.Button.Looks.LINK,color:O.Button.Colors.LINK},void 0,B.default.Messages.NEED_ACCOUNT)))};r.renderDefaultForm=function(e){var t,n,r=this,a=this.props,i=a.invite,u=a.giftCode,l=a.loginStatus,s=a.isGuest,c=a.country,d=!this.hasError("email")&&this.hasError("password"),f=null!=(null==i?void 0:i.stage_instance);n=null==i||f?null!=u?K(w.default,{giftCode:u}):s?null:K("div",{className:F.default.header},void 0,K(O.Title,{className:j.default.marginBottom8
},"title",B.default.Messages.LOGIN_TITLE),K(O.SubTitle,{},"subtitle",B.default.Messages.AUTH_LOGIN_BODY)):K(D.default,{invite:i});return K(T.default,{direction:T.default.Direction.HORIZONTAL,align:T.default.Align.CENTER},void 0,K("div",{className:F.default.mainLoginContainer},void 0,this.canShowChooseAccount&&this.state.dismissedChooseAccount&&K(O.Button,{onClick:function(){r.setState((function(e){return V({},e,{dismissedChooseAccount:!1})}))},look:O.Button.Looks.LINK,color:O.Button.Colors.PRIMARY,className:F.default.goBackButton},void 0,K("div",{className:F.default.content},void 0,K(S.default,{width:16,height:16,className:F.default.caret}),K(R.default,{size:R.default.Sizes.SIZE_16},void 0,B.default.Messages.AGE_GATE_GO_BACK))),n,K(O.Block,{className:j.default.marginTop20},void 0,K(g.default,{alpha2:c.alpha2,countryCode:c.code.split(" ")[0],className:j.default.marginBottom20,label:B.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,
error:null!==(t=this.renderError("login"))&&void 0!==t?t:this.renderError("email"),onChange:function(e,t){return r.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!d}),K(O.Input,{label:B.default.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return r.setState({password:e})},name:"password",type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",autoFocus:d,value:this.state.password}),K(O.Button,{onClick:this.handleForgotPassword,look:O.Button.Looks.LINK,color:O.Button.Colors.LINK,className:(0,o.default)(j.default.marginBottom20,j.default.marginTop4)},void 0,B.default.Messages.FORGOT_PASSWORD),K(O.Button,{type:"submit",submitting:l===G.LoginStates.LOGGING_IN,color:f?O.Button.Colors.GREEN:O.Button.Colors.BRAND,className:j.default.marginBottom8},void 0,f?B.default.Messages.LOGIN_STAGE:B.default.Messages.LOGIN),K("div",{
className:j.default.marginTop4},void 0,K("span",{className:F.default.needAccount},void 0,B.default.Messages.NEED_ACCOUNT),K(O.Button,{onClick:this.handleGotoRegister,look:O.Button.Looks.LINK,color:O.Button.Colors.LINK,className:F.default.smallRegisterLink},void 0,B.default.Messages.REGISTER)))),e?K(k.default,{authTokenCallback:this.handleAuthToken}):null)};r.renderDefault=function(){var e=this.props,t=e.authBoxClassName,n=e.isGuest;return K("div",{className:F.default.pageContainer},void 0,K(O.default,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0},void 0,this.renderDefaultForm(!n)))};r.renderGuildTemplate=function(e){var t=this,n=K(p.default,{guildTemplate:e});return K(U.default,{onSubmit:this.handleLogin,tag:"form",className:(0,o.default)(this.props.authBoxClassName,F.default.horizontalAuthBox)},void 0,(function(){return[n,t.renderDefaultForm(!1)]}))};r.renderMFA=function(){var e=this,t=this.props,r=t.loginStatus,a=t.mfaSMS,o=t.authBoxClassName;return K(O.default,{
onSubmit:this.handleTokenSubmit,tag:"form",className:o},void 0,K("img",{alt:"",src:n(148267),className:j.default.marginBottom20}),K(O.Title,{className:j.default.marginBottom8},void 0,B.default.Messages.TWO_FA),K(O.SubTitle,{},void 0,B.default.Messages.TWO_FA_ENTER_TOKEN_BODY),K(O.Block,{className:j.default.marginTop40},void 0,K(O.Input,{className:j.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({code:t})},autoComplete:"one-time-code",placeholder:B.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:B.default.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code},"totpCode"),K(O.Button,{type:"submit",submitting:r===G.LoginStates.LOGGING_IN_MFA},void 0,B.default.Messages.LOGIN),a?K(O.Button,{onClick:this.handleToggleSMSLogin,submitting:r===G.LoginStates.LOGGING_IN_MFA_SMS,className:j.default.marginTop8,look:O.Button.Looks.LINK,color:O.Button.Colors.LINK
},void 0,B.default.Messages.MFA_SMS_RECEIVE_CODE):null,K(O.Button,{look:O.Button.Looks.LINK,color:O.Button.Colors.LINK,className:j.default.marginTop4,onClick:this.handleReset},void 0,B.default.Messages.TWO_FA_LOGIN_FOOTER)))};r.renderMFASMS=function(){var e=this,t=this.props,r=t.loginStatus,a=t.maskedPhone,o=t.authBoxClassName,i=r===G.LoginStates.LOGGING_IN_MFA_SMS||""===a;return K(O.default,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:o},void 0,K("img",{alt:"",src:n(148267),className:j.default.marginBottom20}),K(O.Title,{className:j.default.marginBottom8},void 0,B.default.Messages.TWO_FA),K(O.SubTitle,{className:j.default.marginBottom8},void 0,i?B.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:B.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:a})),K(O.Block,{className:j.default.marginTop40},void 0,K(O.Input,{className:j.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},
autoComplete:"off",placeholder:B.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:B.default.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode},"smsCode"),K(O.Button,{type:"submit",submitting:i,color:i?O.Button.Colors.TRANSPARENT:O.Button.Colors.BRAND},void 0,B.default.Messages.LOGIN),i?null:K(O.Button,{onClick:this.handleToggleSMSLogin,className:j.default.marginTop8,look:O.Button.Looks.LINK,color:O.Button.Colors.LINK},void 0,B.default.Messages.MFA_SMS_RESEND),K(O.Button,{look:O.Button.Looks.LINK,color:O.Button.Colors.LINK,className:j.default.marginTop4,onClick:this.handleReset},void 0,B.default.Messages.TWO_FA_LOGIN_FOOTER)))};r.renderIPAuthorization=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return K(O.default,{tag:"form",className:e},void 0,K(d.default,{title:B.default.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:B.default.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({
onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:s.default.loginReset}))};r.renderPasswordRecovery=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return K(O.default,{tag:"form",className:e},void 0,K(d.default,{title:B.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,subtitle:B.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:s.default.loginReset}))};r.renderChooseAccount=function(){var e=this;return K(m.default,{onDismiss:function(){e.setState((function(e){return V({},e,{dismissedChooseAccount:!0})}))}})};r.render=function(){var e=this.props,t=e.authenticated,n=e.invite,r=e.guildTemplate,a=e.loginStatus,o=e.handoffAvailable,i=e.isGuest,u=e.authBoxClassName,l=e.errors,s=this.state,c=s.checkingHandoff;if(s.redirecting)return null;if(this.hasError("captcha_key"))return K(L.default,{authBoxClassName:u,
onVerify:this.handleCaptchaVerify,title:i?null:B.default.Messages.LOGIN_TITLE,sitekey:l.captcha_sitekey,captchaService:(0,b.parseCaptchaType)(l.captcha_service)});if(o)return this.renderHandOffAvailable();if(t&&c)return this.renderHandOffContinue();switch(a){case G.LoginStates.LOGGING_IN_MFA_SMS:case G.LoginStates.MFA_SMS_STEP:return this.renderMFASMS();case G.LoginStates.LOGGING_IN_MFA:case G.LoginStates.MFA_STEP:return this.renderMFA();case G.LoginStates.ACCOUNT_SCHEDULED_FOR_DELETION:case G.LoginStates.ACCOUNT_DISABLED:return this.renderDisabledAccount();case G.LoginStates.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case G.LoginStates.PASSWORD_RECOVERY_PHONE_VERIFICATION:return this.renderPasswordRecovery();case G.LoginStates.LOGGING_IN:case G.LoginStates.NONE:default:
return null!=n&&n.state===G.InviteStates.RESOLVING?this.renderResolving():null!=r?r.state===G.InviteStates.RESOLVING?this.renderResolving():this.renderGuildTemplate(r):this.canShowChooseAccount&&!this.state.dismissedChooseAccount?this.renderChooseAccount():this.renderDefault()}};!function(e,t,n){t&&Z(e.prototype,t);n&&Z(e,n)}(t,[{key:"loginSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,a=e.isGuest;if(null!=t)return"gift";if(null!=n)return"guild_template";if(null!=r){if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}else if(a)return"guest_lurker";return null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}},{key:"canShowChooseAccount",get:function(){var e=this.props,t=e.isMultiAccountPreviouslyEnabled,n=e.hasLoggedInAccounts;return t&&n}}]);return t}(a.PureComponent);J.displayName="Login";J.defaultProps={isGuest:!1,transitionTo:function(e){
return n.g.location.assign(e)}};function X(e){var t=(0,l.useStateFromStoresObject)([N.default,I.default,y.default,v.default,_.default],(function(){return{authenticated:y.default.isAuthenticated(),handoffAvailable:N.default.isHandoffAvailable(),user:N.default.user,loginStatus:y.default.getLoginStatus(),mfaTicket:y.default.getMFATicket(),mfaSMS:y.default.getMFASMS(),maskedPhone:y.default.getMaskedPhone(),errors:y.default.getErrors(),defaultRoute:I.default.defaultRoute,country:_.default.getCountryCode(),isMultiAccountPreviouslyEnabled:v.default.getIsMultiAccountPreviouslyEnabled(),hasLoggedInAccounts:v.default.getHasLoggedInAccounts()}}));return a.createElement(J,V({},e,t))}X.displayName="ConnectedLogin";var ee=X;t.default=ee},721097:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=function(e){var t=i.useState(0),n=t[0],r=t[1],o=i.useState(!1),l=o[0],s=o[1],d=i.useState({step:a.INITIALIZING}),f=d[0],p=d[1],v=(0,
c.default)(),m=i.useMemo((function(){return new u.default(1500,3e4)}),[]),h=i.useRef();h.current=i.useCallback((function(){p({step:a.INITIALIZING});if(v)r((function(e){return e+1}));else{b.info("document is not visible, will defer reconnection when document becomes visible.");s(!0)}}),[p,r,v,s]);var y=i.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(h)()}),[h]);i.useEffect((function(){if(v&&l&&f.step===a.INITIALIZING){b.info("reconnecting, now that document is visible");s(!1);r((function(e){return e+1}))}}),[f,v,l,s]);i.useEffect((function(){var t=Date.now(),n=function(){return Date.now()-t+"ms"},r="wss:"+window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT+"/?v=1",o=new WebSocket(r);b.info("[0ms] connecting to "+r);var i=function(e){return b.info("["+n()+"] "+e)},u=null,l=null,s=null,c=null,d=!0;function f(){if(null!=u)return u;throw new Error("No key pair set")}var v=function(){p({step:a.INITIALIZING})
;m.pending||m.fail(y)},h=function(){if(d){d=!1;o.send(JSON.stringify({op:"heartbeat"}))}else{i("heartbeat timeout, reconnecting.");o.close();v()}};o.onmessage=function(){var t=R(regeneratorRuntime.mark((function t(n){var r,u,l,v,N,I,T,O,S,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.data;u=JSON.parse(r);t.t0=u.op;t.next="nonce_proof"===t.t0?5:"pending_remote_init"===t.t0?12:"pending_finish"===t.t0?22:"finish"===t.t0?30:"cancel"===t.t0?39:"hello"===t.t0?42:"heartbeat_ack"===t.t0?46:47;break;case 5:l=u.encrypted_nonce;t.next=8;return(0,g.computeNonceProof)(f(),l);case 8:v=t.sent;i("computed nonce proof");o.send(JSON.stringify({op:"nonce_proof",proof:v}));return t.abrupt("return");case 12:m.succeed();_.ComponentDispatch.dispatch(E.ComponentActions.WAVE_EMPHASIZE);t.next=16;return(0,g.publicKeyFingerprint)(f());case 16:if((N=t.sent)===u.fingerprint){t.next=19;break}throw new Error("bad fingerprint "+N+" !== "+u.fingerprint);case 19:
i("handshake complete awaiting remote auth.");p({step:a.PENDING_REMOTE_INIT,fingerprint:N});return t.abrupt("return");case 22:_.ComponentDispatch.dispatch(E.ComponentActions.WAVE_EMPHASIZE);i("remote auth handshake started, awaiting finish/cancel.");I=u.encrypted_user_payload;t.next=27;return(0,g.decodeEncodedUserRecord)(f(),I);case 27:T=t.sent;p({step:a.PENDING_FINISH,user:T});return t.abrupt("return");case 30:_.ComponentDispatch.dispatch(E.ComponentActions.WAVE_EMPHASIZE);i("remote auth handshake finished.");O=u.encrypted_token;p({step:a.FINISH});t.next=36;return(0,g.decryptEncodedCiphertext)(f(),O);case 36:S=t.sent;e(S);return t.abrupt("return");case 39:i("remote auth handshake cancelled.");y();return t.abrupt("return");case 42:i("got hello, auth timeout="+u.timeout_ms+"ms");A=u.heartbeat_interval;c=setTimeout((function(){c=null;h();s=setInterval(h,A)}),Math.floor(A*Math.random()));return t.abrupt("return");case 46:d=!0;case 47:case"end":return t.stop()}}),t)})));return function(e){
return t.apply(this,arguments)}}();o.onopen=R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return(0,g.generateRsaKeyPair)();case 2:u=e.sent;e.next=5;return(0,g.serializePublicKey)(u);case 5:l=e.sent;e.next=8;return(0,g.publicKeyFingerprint)(u);case 8:t=e.sent;i("connected, handshaking with fingerprint: "+t);o.send(JSON.stringify({op:"init",encoded_public_key:l}));case 11:case"end":return e.stop()}}),e)})));o.onclose=function(e){i("disconnected, code: "+e.code+" "+e.reason);v()};o.onerror=function(e){i("disconnected, error: "+JSON.stringify(e));v()};return function(){i("cleaning up");o.onopen=function(){return null};o.onmessage=function(){return null};o.onclose=function(){return null};o.onerror=function(){return null};o.close(1e3);m.cancel();null!=c&&clearTimeout(c);null!=s&&clearInterval(s)}}),[y,e,m,n]);return{state:f,cancel:y}}(e.authTokenCallback),n=t.state,r=t.cancel,l=function(e){switch(e){
case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return o.QR_CODE;case a.PENDING_FINISH:case a.FINISH:return o.CONFIRM}}(n.step);return i.createElement(i.Fragment,null,A("div",{className:I.default.verticalSeparator}),A(f.default,{fillParent:!0,className:I.default.qrLogin,step:l,steps:[o.QR_CODE,o.CONFIRM]},void 0,A("div",{className:I.default.qrLoginInner},void 0,A(L,{state:n,cancel:r}))))};var r,a,o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r
}(n(667294)),u=O(n(621786)),l=O(n(358916)),s=O(n(538930)),c=O(n(612393)),d=O(n(791548)),f=O(n(268660)),p=O(n(956117)),v=O(n(80828)),m=n(72840),h=O(n(628551)),_=n(956506),g=n(217114),E=n(770348),y=n(478036),N=O(n(247001)),I=O(n(891789)),T=O(n(762530));function O(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function C(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function R(e){
return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,u,"next",e)}function u(e){C(o,r,a,i,u,"throw",e)}i(void 0)}))}}!function(e){e[e.INITIALIZING=0]="INITIALIZING";e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT";e[e.PENDING_FINISH=2]="PENDING_FINISH";e[e.FINISH=3]="FINISH"}(a||(a={}));!function(e){e[e.QR_CODE=0]="QR_CODE";e[e.CONFIRM=1]="CONFIRM"}(o||(o={}));var M=n(182765),b=new d.default("LoginQRSocket");function P(e){var t=e.text,n=void 0===t?"":t,r=M,a=i.useState(!1),o=a[0],u=a[1];i.useEffect((function(){var e=new Image;e.src=r;e.onload=function(){return u(!0)};e.onerror=function(){return u(!0)}}),[r]);return A("div",{className:I.default.qrCodeContainer},void 0,""!==n&&o?i.createElement(i.Fragment,null,A(l.default,{className:I.default.qrCode,width:160,height:160,text:n}),A("div",{className:I.default.qrCodeOverlay},void 0,A("img",{src:r,alt:""}))):A("div",{className:I.default.qrCodeOverlay},void 0,A(v.default,{
className:I.default.qrCode,type:v.default.Type.WANDERING_CUBES})))}P.displayName="QrCodeWithOverlay";function L(e){var t=e.state,n=e.cancel;switch(t.step){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return i.createElement(i.Fragment,null,A(P,{text:t.step===a.PENDING_REMOTE_INIT?"https://discord.com/ra/"+t.fingerprint:""}),A(m.Title,{className:T.default.marginBottom8},void 0,N.default.Messages.LOGIN_WITH_QR),A(m.SubTitle,{},void 0,N.default.Messages.LOGIN_WITH_QR_DESCRIPTION.format()));case a.PENDING_FINISH:var r=t.user;return i.createElement(i.Fragment,null,A(s.default,{className:I.default.qrAvatar,user:r,size:h.default.Sizes.SIZE_120,isMobile:!0,status:y.StatusTypes.ONLINE}),A(m.Title,{className:T.default.marginBottom8},void 0,N.default.Messages.CONFIRM_QR_CHECK_YOUR_PHONE),A(m.SubTitle,{},void 0,N.default.Messages.LOGIN_AS.format({username:r.username+"#"+r.discriminator})),A(p.default,{look:p.default.Looks.BLANK,color:p.default.Colors.LINK,size:p.default.Sizes.MIN,onClick:n,
className:I.default.startOverButton},void 0,N.default.Messages.QR_CODE_LOGIN_START_OVER));case a.FINISH:return A(v.default,{type:v.default.Type.WANDERING_CUBES})}}},543188:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=p;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=s(n(294184)),i=s(n(72840)),u=s(n(656066)),l=["children","className"];function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(){
d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return d.apply(this,arguments)}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){var t=e.children,n=e.className,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,l),s=t();return a.createElement(i.default,d({},r,{className:(0,o.default)(n,u.default.container),contentClassName:u.default.content}),s.map((function(e,t){return f("div",{
className:u.default.column,style:{flexBasis:100/s.length+"%"}},t,e)})))}p.displayName="MultiColumnAuthBox"},826220:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=se;var r,a=Q(n(667294)),o=$(n(294184)),i=n(517563),u=n(47354),l=Q(n(536211)),s=n(91817),c=$(n(939949)),d=$(n(906998)),f=$(n(369180)),p=$(n(732741)),v=$(n(185948)),m=n(973814),h=Q(n(48465)),_=$(n(922659)),g=n(947329),E=$(n(550910)),y=Q(n(802369)),N=n(898460),I=$(n(685528)),T=$(n(405141)),O=$(n(915574)),S=n(520310),A=$(n(864062)),C=n(887299),R=$(n(423046)),M=$(n(8549)),b=$(n(544196)),P=$(n(730977)),L=Q(n(72840)),w=$(n(662197)),D=$(n(916417)),k=$(n(776360)),U=$(n(308920)),G=n(956506),B=$(n(141482)),F=$(n(801635)),j=Q(n(900993)),x=$(n(543188)),H=n(770348),W=n(822858),V=n(27577),K=n(754949),z=$(n(247001)),Y=$(n(31202)),Z=$(n(762530));function $(e){return e&&e.__esModule?e:{default:e}}function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(q=function(e){
return e?n:t})(e)}function Q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=q(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}function J(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function X(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}
u.done?t(l):Promise.resolve(l).then(r,a)}function ee(){ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return ee.apply(this,arguments)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function ne(e,t){ne=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return ne(e,t)}l.default.initialize();var re=/\.$/,ae=function(e){return Array.isArray(e)?e.map((function(e){return e.replace(re,"")})).join(". ").trim():e},oe=J(j.InviteResolvingHeader,{}),ie=J(E.default,{}),ue=J(f.default,{}),le=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;ne(e,t)}(t,e);function t(t){var n;(n=e.call(this,t)||this).dateOfBirthRef=a.createRef();n._retryTimer=new s.Timeout;n.handleCaptchaVerify=function(e){return n.setState({
captchaKey:e},(function(){n.handleRegister()}))};n.handleGotoLogin=function(){var e=n.state.email,t=n.props,r=t.onLoginStart,a=t.giftCode,o=t.transitionTo,u=t.invite,l=t.guildTemplate,s=t.redirectTo,d=t.isGuest,f=t.location,p=t.closeRegister,v=t.openLogin;if(d){void 0!==p&&p();void 0!==v&&v()}else{var m,h=null!=f?(0,i.parse)(f.search):{};if(null!=u)m=H.Routes.INVITE_LOGIN(u.code);else if(null!=a)m=H.Routes.GIFT_CODE_LOGIN(a.code);else if(null!=l)m=H.Routes.GUILD_TEMPLATE_LOGIN(l.code);else if(null!=s){m=H.Routes.LOGIN;h.redirect_to=s}else{m=H.Routes.LOGIN;""!==e&&(h={email:e})}c.default.loginReset();o(m,{search:(0,i.stringify)(h)});null!=r&&r();G.ComponentDispatch.dispatch(H.ComponentActions.WAVE_EMPHASIZE)}};n.handleSubmit=function(e){e&&e.preventDefault();var t=n.state.parsedDateOfBirth,r=n.props,a=r.invite;null!==r.consentRequired&&(null==a&&null==t||n.handleRegister())};n.handleBirthdayChange=function(e){n.setState({parsedDateOfBirth:e})};var r=null!=t.location?(0,
i.parse)(t.location.search):{};n.state={email:r.email||"",username:"",password:"",parsedDateOfBirth:null,captchaKey:null,consent:!t.consentRequired,consentRequiredProp:t.consentRequired,isRateLimited:!1};return n}var n=t.prototype;n.hasConsent=function(){var e=this.props.consentRequired,t=this.state.consent;return null!=e&&t};n.componentDidMount=function(){this.redirectIfAuthenticated();var e=this.props,t=e.giftCodeSKU,n=e.invite;U.default.track(H.AnalyticEvents.REGISTER_VIEWED,ee({location:null!=n?"Invite Register Page":"Non-Invite Register Page",registration_source:this.registrationSource},null!=t?(0,I.default)(t,!1,!1):{}),{flush:!0});null==this.props.consentRequired&&c.default.getLocationMetadata();(0,C.trackAppUIViewed)("register")};n.componentWillUnmount=function(){this._retryTimer.stop()};t.getDerivedStateFromProps=function(e,t){var n=e.consentRequired;return null==t.consentRequiredProp&&null!=n?{consent:!n,consentRequiredProp:n}:{consentRequiredProp:n}}
;n.componentDidUpdate=function(e,t){var n=this,r=this.props,a=r.apiErrors,o=r.authenticated,i=r.isUnderage,u=r.invite,l=r.onChangeStep,s=this.state.parsedDateOfBirth;if(e.apiErrors!==a||t.parsedDateOfBirth!==s)if(this.hasError("email")||this.hasError("phone"))null!=this.emailRef&&this.emailRef.focus();else if(this.hasError("username"))null!=this.usernameRef&&this.usernameRef.focus();else if(this.hasError("password"))null!=this.passwordRef&&this.passwordRef.focus();else if(null==this.state.parsedDateOfBirth)null!=this.dateOfBirthRef.current&&this.dateOfBirthRef.current.focus();else if(this.hasError("retry_after")&&"number"==typeof this.props.apiErrors.retry_after){this.setState({isRateLimited:!0});this._retryTimer.start(1e3*this.props.apiErrors.retry_after,(function(){n.setState({isRateLimited:!1})}))}if(o&&!e.authenticated){(0,S.setNewUser)(K.NewUserTypes.ORGANIC_REGISTERED);this.redirectIfAuthenticated()}var c=W.RegistrationSteps.FULL
;i||this.hasError("date_of_birth")?c=W.RegistrationSteps.AGE_GATE:this.hasError("captcha_key")?c=W.RegistrationSteps.CAPTCHA:null==u||null==u.guild&&null==u.channel||(c=W.RegistrationSteps.INVITE);l(c)};n.redirectIfAuthenticated=function(){var e=this.props,t=e.authenticated,n=e.transitionTo,r=e.redirectTo;t&&n(null!=r?r:b.default.defaultRoute)};n.handleRegister=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,u,l,s,c,d,f,p,v,_,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,n=t.email,r=t.username,a=t.password,o=t.captchaKey,i=t.consent,u=t.parsedDateOfBirth;l=this.props,s=l.invite,c=l.guildTemplate,d=l.giftCode,f=l.onRegister;p=null!=s?s.code:null;v=null!=d?d.skuId:null;_=m.usePromoEmailConsentStore.getState();if(!V.CONFERENCE_MODE_ENABLED){e.next=11;break}e.next=8;return(0,N.formatUsername)(r);case 8:e.t0=e.sent;e.next=12;break;case 11:e.t0=r;case 12:g=e.t0
;G.ComponentDispatch.dispatch(H.ComponentActions.WAVE_EMPHASIZE);e.prev=14;if(null==s){e.next=20;break}e.next=18;return(0,h.default)({username:g,consent:i,invite:p,giftCodeSKUId:v,captchaKey:o});case 18:e.next=22;break;case 20:e.next=22;return(0,h.registerFull)({email:n,username:g,consent:i,password:a,invite:p,guildTemplateCode:null==c?void 0:c.code,giftCodeSKUId:v,captchaKey:o,birthday:u,promoEmailConsent:_.enabled?_:null});case 22:e.next=26;break;case 24:e.prev=24;e.t1=e.catch(14);case 26:f&&f();case 27:case"end":return e.stop()}}),e,this,[[14,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){X(o,r,a,i,u,"next",e)}function u(e){X(o,r,a,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();n.hasError=function(e){return null!=this.props.apiErrors[e]};n.renderConsentComponents=function(){var e=this,t=this.state.consent,n=null,r=null;this.props.consentRequired?r=J(_.default,{value:t,
onChange:function(t){return e.setState({consent:t})},subText:z.default.Messages.TERMS_PRIVACY_OPT_IN.format({termsURL:H.MarketingURLs.TERMS,privacyURL:H.MarketingURLs.PRIVACY})}):n=J(L.SubText,{className:Z.default.marginTop20},void 0,z.default.Messages.TERMS_PRIVACY.format({termsURL:H.MarketingURLs.TERMS,privacyURL:H.MarketingURLs.PRIVACY}));return{subText:n,consentText:r}};n.renderInviteResolving=function(){var e=this,t=this.props.authBoxClassName;return J(L.default,{className:t},void 0,oe,J(L.Block,{className:Z.default.marginTop40},void 0,J(w.default,{},void 0,z.default.Messages.FORM_LABEL_USERNAME),J(P.default,{text:z.default.Messages.AUTH_USERNAME_TOOLTIP,position:P.default.Positions.RIGHT,color:P.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return J(L.Input,{autoFocus:!0,className:Z.default.marginBottom8,name:"username",value:e.state.username,placeholder:z.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({
username:t})},onMouseEnter:n,onMouseLeave:r})})),J(L.Button,{className:Z.default.marginTop20,disabled:!0},void 0,z.default.Messages.CONTINUE),V.CONFERENCE_MODE_ENABLED?null:J(L.Button,{look:L.Button.Looks.LINK,color:L.Button.Colors.LINK,disabled:!0,className:Z.default.marginTop8},void 0,z.default.Messages.ALREADY_HAVE_ACCOUNT),J(L.SubText,{disabled:!0,className:Z.default.marginTop20},void 0,z.default.Messages.TERMS_PRIVACY.format({termsURL:H.MarketingURLs.TERMS,privacyURL:H.MarketingURLs.PRIVACY}))))};n.renderInviteHeader=function(){var e=this.props.invite;return null!=(null==e?void 0:e.stage_instance)&&null!=e.guild?J(y.default,{stageInstance:e.stage_instance,guild:e.guild}):null!=(null==e?void 0:e.guild_scheduled_event)?J(g.GuildScheduledEventInviteHeader,{channel:e.channel,guildScheduledEvent:e.guild_scheduled_event}):J(j.default,{invite:e})};n.renderInviteButton=function(){
var e=this,t=this.props,n=t.invite,r=t.registering,o=t.consentRequired,i=this.state.consent,u=L.Button.Colors.BRAND,l=z.default.Messages.CONTINUE;if(null!=(null==n?void 0:n.stage_instance)){u=L.Button.Colors.GREEN;l=z.default.Messages.INSTANT_INVITE_ACCEPT_STAGE}return J(P.default,{text:!i&&o?z.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(t){return a.createElement("div",ee({className:Z.default.marginTop20},t),J(L.Button,{type:"submit",submitting:r,disabled:!e.hasConsent(),color:u},void 0,l))}))};n.renderInvite=function(){var e=this,t=this.props,n=t.invite,r=t.authBoxClassName,a=t.apiErrors.username,o=this.renderConsentComponents(),i=o.subText,u=o.consentText,l=null!=(null==n?void 0:n.stage_instance)||null!=(null==n?void 0:n.guild_scheduled_event);return J("div",{},void 0,J(L.default,{onSubmit:this.handleSubmit,tag:"form",className:r},void 0,this.renderInviteHeader(),l?J("div",{className:Y.default.divider}):null,J(L.Block,{className:l?void 0:Z.default.marginTop40
},void 0,J(w.default,{error:ae(a)},void 0,z.default.Messages.FORM_LABEL_USERNAME),J(P.default,{text:z.default.Messages.AUTH_USERNAME_TOOLTIP,position:P.default.Positions.RIGHT,color:P.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return J(L.Input,{autoFocus:!0,className:Z.default.marginBottom8,name:"username",value:e.state.username,placeholder:z.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},error:null!=a?"":null,onMouseEnter:n,onMouseLeave:r})})),u,this.renderInviteButton(),V.CONFERENCE_MODE_ENABLED?null:J(L.Button,{look:L.Button.Looks.LINK,color:L.Button.Colors.LINK,onClick:this.handleGotoLogin,className:Z.default.marginTop8},void 0,z.default.Messages.ALREADY_HAVE_ACCOUNT),i)),null!=n&&l?J(L.default,{className:Z.default.marginTop20},void 0,J(y.StageInviteFooter,{guild:n.guild,onlineCount:n.approximate_presence_count})):null)};n.renderErrorMessage=function(){var e=this.props.apiErrors.message
;return"string"!=typeof e?null:J(L.SubText,{className:(0,o.default)(Z.default.marginTop20,Y.default.errorMessage)},void 0,e)};n.renderFull=function(e,t){var n=this,r=this.state,i=r.email,u=r.username,l=r.password,s=r.consent,c=r.parsedDateOfBirth,d=this.props,f=d.registering,v=d.consentRequired,m=d.isGuest,h=d.authBoxClassName,_=d.apiErrors,g=(_=void 0===_?{}:_).email,E=_.username,y=_.password,N=_.date_of_birth,I=this.renderConsentComponents(),T=I.subText,O=I.consentText,S=this.renderErrorMessage(),A=J(P.default,{text:!s&&v?z.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(e){return a.createElement("div",ee({className:Z.default.marginTop20},e),J(L.Button,{type:"submit",submitting:f,disabled:!n.hasConsent()||n.state.isRateLimited},void 0,z.default.Messages.CONTINUE))})),C=m?null:null!=e?e():J(L.Title,{},void 0,z.default.Messages.REGISTER_TITLE),R=J(L.Block,{className:Z.default.marginTop20},void 0,J(L.Input,{autoFocus:!0,className:Z.default.marginBottom20,
label:z.default.Messages.FORM_LABEL_EMAIL,name:"email",value:i,onChange:function(e){return n.setState({email:e})},error:ae(g),type:"email",setRef:function(e){n.emailRef=e}}),J(L.Input,{label:z.default.Messages.FORM_LABEL_USERNAME,className:Z.default.marginBottom20,name:"username",value:u,onChange:function(e){return n.setState({username:e})},error:ae(E),setRef:function(e){n.usernameRef=e}}),J(L.Input,{label:z.default.Messages.FORM_LABEL_PASSWORD,name:"password",value:l,onChange:function(e){return n.setState({password:e})},error:ae(y),type:"password",setRef:function(e){n.passwordRef=e}}),a.createElement(p.default,{label:z.default.Messages.AGE_GATE_YOUR_BIRTHDAY,wrapperClassName:Z.default.marginTop20,name:"date_of_birth",onChange:this.handleBirthdayChange,ref:this.dateOfBirthRef,error:ae(N),value:c}),O,ie,A,S,V.CONFERENCE_MODE_ENABLED?null:J(L.Button,{look:L.Button.Looks.LINK,color:L.Button.Colors.LINK,onClick:this.handleGotoLogin,className:Z.default.marginTop8
},void 0,z.default.Messages.ALREADY_HAVE_ACCOUNT),T);return t?J(x.default,{onSubmit:this.handleSubmit,tag:"form",className:(0,o.default)(h,Y.default.horizontalAuthBox)},void 0,(function(){return[C,J("div",{className:Y.default.flex},void 0,J(L.Title,{className:Y.default.createAccountTemplateHeader},void 0,z.default.Messages.REGISTER_TITLE),R)]})):J(L.default,{onSubmit:this.handleSubmit,tag:"form",className:h},void 0,this.props.isMultiAccountPreviouslyEnabled&&this.props.hasLoggedInAccounts&&J(L.Button,{onClick:this.handleGotoLogin,look:L.Button.Looks.LINK,color:L.Button.Colors.PRIMARY,className:Y.default.goBackButton},void 0,J("div",{className:Y.default.content},void 0,J(D.default,{width:16,height:16,className:Y.default.caret}),J(k.default,{size:k.default.Sizes.SIZE_16},void 0,z.default.Messages.AGE_GATE_GO_BACK))),C,R)};n.render=function(){var e=this.props,t=e.isGuest,n=e.authBoxClassName,r=e.isUnderage,a=e.apiErrors,o=a.captcha_service,i=a.captcha_sitekey
;if(r||this.hasError("date_of_birth"))return ue;if(this.hasError("captcha_key")&&"string"==typeof o)return J(B.default,{authBoxClassName:n,onVerify:this.handleCaptchaVerify,title:t?null:z.default.Messages.REGISTER_TITLE,captchaService:o,sitekey:i});var u=this.props,l=u.invite,s=u.giftCode,c=u.guildTemplate,d=null!=l&&null==l.guild&&null==l.channel&&null!=l.inviter;if(null!=l&&!d)return l.state===H.InviteStates.RESOLVING?this.renderInviteResolving():this.renderInvite();var f=J(T.default,{guildTemplate:c});if(null!=c)return this.renderFull((function(){return f}),!0);var p=J(F.default,{giftCode:s});if(null!=s)return this.renderFull((function(){return p}));var v=J(j.default,{invite:l,isRegister:!0});return null!=l&&d&&l.state===H.InviteStates.RESOLVED?this.renderFull((function(){return v})):this.renderFull()};!function(e,t,n){t&&te(e.prototype,t);n&&te(e,n)}(t,[{key:"registrationSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite;if(null!=t)return"gift"
;if(null!=n)return"guild_template";if(null!=r){if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}return null}}]);return t}(a.PureComponent);le.displayName="Register";le.defaultProps={giftCodeResolved:!1,transitionTo:function(e){return n.g.location.assign(e)}};function se(e){var t=(0,l.useStateFromStoresObject)([M.default,R.default,d.default,A.default,O.default],(function(){return{consentRequired:M.default.getAuthenticationConsentRequired(),registering:R.default.getRegisterStatus()===H.RegistrationStates.REGISTERING,apiErrors:R.default.getErrors(),authenticated:R.default.isAuthenticated(),isUnderage:d.default.isUnderageAnonymous(),country:A.default.getCountryCode(),isMultiAccountPreviouslyEnabled:O.default.getIsMultiAccountPreviouslyEnabled(),hasLoggedInAccounts:O.default.getHasLoggedInAccounts()}})),n=a.useState(W.RegistrationSteps.FULL),r=n[0],o=n[1];(0,v.default)({type:u.ImpressionTypes.VIEW,
name:u.ImpressionNames.USER_REGISTRATION,metadata:{impression_group:u.ImpressionGroups.USER_REGISTRATION_FLOW,step:r}},{},[r]);return a.createElement(le,ee({onChangeStep:function(e){return o(e)}},e,t))}se.displayName="ConnectedRegister"},4349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PromotionalEmailOptInExperiment=void 0;var r=(0,n(373505).createExperiment)({kind:"user",id:"2021-08_promotional_email_opt_in_experiment",label:"Promotional email opt in experiment",defaultConfig:{enabled:!1},treatments:[{id:1,label:"show promotional email opt in checkbox above cta",config:{enabled:!0}}]});t.PromotionalEmailOptInExperiment=r},612393:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(0,r.useState)(a()),t=e[0],n=e[1];(0,r.useEffect)((function(){function e(){n(a())}window.addEventListener("visibilitychange",e);return function(){window.removeEventListener("visibilitychange",e)}}),[n]);return t};var r=n(667294)
;function a(){return"undefined"==typeof document||"visible"===document.visibilityState}},906998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=l(n(676489)),a=l(n(536211)),o=l(n(636602)),i=l(n(864489)),u=n(78330);n(770348);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}var c=null;var d=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;s(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.isUnderageAnonymous=function(){if(!i.default.embedded){return null!=r.default.parse(document.cookie).underage}return null!=c&&c+u.AGE_GATE_REGISTER_TIMEOUT_MS>Date.now()};return t}(a.default.Store))(o.default,{AGE_GATE_PREVENT_UNDERAGE_REGISTRATION:function(e){return function(){!0;c=Date.now();document.cookie="underage=1;path=/"}()},LOGIN_SUCCESS:function(e){return function(){!1;c=null
;document.cookie="underage=1;path=/;max-age=0"}()}});t.default=d},369180:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;p(n(667294));var r,a=n(139982),o=d(n(956117)),i=p(n(72840)),u=d(n(550270)),l=n(770348),s=d(n(247001)),c=d(n(101326));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}function v(e,t,n,a){
r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(){return(0,a.transitionTo)(l.Routes.LOGIN)},h=function(e){var t=e.authBoxClassName,r=e.underageMessage;return v(i.default,{className:t},void 0,v("img",{alt:"",src:n(697694),className:c.default.img}),v(i.Title,{className:c.default.title},void 0,s.default.Messages.AGE_GATE_UNDERAGE_HEADER),v(i.SubTitle,{className:c.default.subtitle},void 0,s.default.Messages.AGE_GATE_UNDERAGE_BODY.format({underageMessage:r||s.default.Messages.AGE_GATE_UNDERAGE_BODY_DEFAULT_MESSAGE,helpURL:u.default.getArticleURL(l.HelpdeskArticles.AGE_GATE)})),v(o.default,{fullWidth:!0,onClick:m
},void 0,s.default.Messages.AGE_GATE_UNDERAGE_BACK_TO_LOGIN))};h.displayName="AgeGateUnderage";var _=h;t.default=_},822858:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RegistrationTransitionActionTypes=t.RegistrationSteps=void 0;var n,r;t.RegistrationTransitionActionTypes=n;!function(e){e.VIEWED="viewed";e.SUBMITTED="submitted";e.RESEND_CODE="resend_code";e.INPUT_ERROR="input_error";e.RESPONSE_ERROR="response_error";e.SUCCESS="success"}(n||(t.RegistrationTransitionActionTypes=n={}));t.RegistrationSteps=r;!function(e){e.IDENTITY="identity";e.ACCOUNT_INFORMATION="account_information";e.FULL="full";e.AGE_GATE="age_gate";e.CAPTCHA="captcha";e.INVITE="invite";e.SMS_VERIFY="sms_verify"}(r||(t.RegistrationSteps=r={}))},48465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.invite,n=void 0===t?null:t,r=e.giftCodeSKUId,a=void 0===r?null:r,o=e.captchaKey,i=void 0===o?null:o;return y(h({},function(e,t){
if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,p),{invite:n,giftCodeSKUId:a,captchaKey:i}))};t.registerDeferred=function(e){o.default.dispatch({type:f.ActionTypes.REGISTER_SAVE_FORM,form:e})};t.registerFull=y;t.registerPhone=function(e){return E.apply(this,arguments)};var r=m(n(730381)),a=n(47354),o=m(n(636602)),i=m(n(568681)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(921052)),l=m(n(423046)),s=m(n(308920)),c=m(n(351772)),d=m(n(132699)),f=n(770348),p=["invite","giftCodeSKUId","captchaKey"];function v(e){
if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function h(){h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return h.apply(this,arguments)}function _(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_(o,r,a,i,u,"next",e)}function u(e){_(o,r,a,i,u,"throw",e)}i(void 0)}))}}function E(){return(E=g(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.phone;e.prev=1;e.next=4;return c.default.post({url:f.Endpoints.REGISTER_PHONE,body:{phone:n},trackedActionData:{event:a.NetworkActionNames.USER_REGISTER_PHONE}})
;case 4:return e.abrupt("return",e.sent);case 7:e.prev=7;e.t0=e.catch(1);r=new i.default(e.t0);o.default.dispatch({type:f.ActionTypes.REGISTER_FAILURE,error:r});throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function y(e){var t=e.email,n=e.phoneToken,p=e.username,v=e.consent,m=e.password,h=e.guildTemplateCode,_=e.birthday,g=e.invite,E=void 0===g?null:g,y=e.giftCodeSKUId,N=void 0===y?null:y,I=e.captchaKey,T=void 0===I?null:I,O=e.multiStep,S=void 0!==O&&O,A=e.promoEmailConsent,C=void 0===A?null:A;o.default.dispatch({type:f.ActionTypes.REGISTER,birthday:S?_:null});if(null!=_){(0,d.default)(_,f.AnalyticsSections.REGISTER);!function(e){var t=(0,r.default)().diff(e,"years");if(!(t<13)){var n;n=t>=13&&t<=17?"13-17":t>=18&&t<=22?"18-22":"23+";s.default.track(f.AnalyticEvents.USER_AGE_SUBMITTED,{age_bucket:n})}}(_)}return c.default.post({url:f.Endpoints.REGISTER,body:{fingerprint:l.default.getFingerprint(),email:t,username:p,password:m,invite:E,
consent:v,phone_token:n,date_of_birth:null==_?void 0:_.format("YYYY-MM-DD"),gift_code_sku_id:N,guild_template_code:h,captcha_key:T,promotional_email_opt_in:null==C?void 0:C.checked},trackedActionData:{event:a.NetworkActionNames.USER_REGISTER,metadata:{invite_code:E,promotional_email_opt_in:null==C?void 0:C.checked,promotional_email_pre_checked:null==C?void 0:C.preChecked}}}).then((function(e){o.default.dispatch({type:f.ActionTypes.REGISTER_SUCCESS,token:e.body.token})}),(function(e){var t=new i.default(e);o.default.dispatch({type:f.ActionTypes.REGISTER_FAILURE,error:t});t.getFieldErrors("date_of_birth")&&u.preventUnderageRegistration();throw e}))}},922659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=p;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r)}(n(667294));var r,a=c(n(294184)),o=c(n(789446)),i=c(n(530250)),u=n(72840),l=c(n(734965)),s=c(n(762530));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){
var t,n=e.value,r=e.onChange,c=e.subText,d=e.muted,p=e.marginTopStyle;return f(i.default,{className:p||s.default.marginTop20,align:i.default.Align.CENTER},void 0,f(o.default,{value:n,type:o.default.Types.INVERTED,onChange:function(e,t){return r(t)},className:l.default.checkbox},void 0,f(u.SubText,{className:(0,a.default)((t={},t[l.default.subText]=!d,t))},void 0,c)))}p.displayName="ConsentCheckBox"},947329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GuildScheduledEventInviteHeader=p;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r)}(n(667294))
;var r,a=n(341186),o=n(330321),i=n(958078),u=s(n(776360)),l=s(n(719033));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.channel,n=(0,a.getSimpleChannelIconComponent)(t.type);return d("div",{className:l.default.channelInfoContainer},void 0,null!=n?d(n,{width:20,height:20}):null,d(u.default,{className:l.default.channelInfoText,color:u.default.Colors.CUSTOM,size:u.default.Sizes.SIZE_14},void 0,t.name))}
f.displayName="ChannelInfo";function p(e){var t=e.channel,n=e.guildScheduledEvent;return d("div",{className:l.default.container},void 0,d(i.GuildEventStatus,{className:l.default.statusContainer,userCount:n.user_count,startTime:n.scheduled_start_time,isActive:(0,o.isGuildScheduledEventActive)(n),isEnded:(0,o.isGuildEventEnded)(n),guildId:n.guild_id,eventType:n.entity_type}),d(i.GuildEventDetails,{name:n.name,description:n.description,guildId:n.guild_id}),null!=t&&n.channel_id===t.id?d(f,{channel:t}):null)}p.displayName="GuildScheduledEventInviteHeader"},250950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=m;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){
var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r)}(n(667294));var r,a=f(n(956117)),o=f(n(915052)),i=f(n(530250)),u=n(72840),l=f(n(776360)),s=f(n(247001)),c=f(n(379478)),d=f(n(762530));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(e){var t=e.title,n=e.subtitle,r=e.error,f=e.onSubmit,p=e.onCancel;return v(i.default,{
direction:i.default.Direction.VERTICAL},void 0,v(u.Title,{className:d.default.marginBottom8},void 0,t),v(u.SubTitle,{className:c.default.subTitle},void 0,n),v("div",{},void 0,v(o.default,{inputClassName:c.default.codeInput,onSubmit:f}),null!=r?v(l.default,{className:c.default.error},void 0,r):null),v(a.default,{className:c.default.button,onClick:p,color:a.default.Colors.GREY},void 0,s.default.Messages.CANCEL))}m.displayName="PhoneVerify"},550910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(0,i.usePromoEmailConsentStore)(),t=e.required,n=e.checked;return t?f(p,{checked:n}):null};var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null
;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=n(4349),i=n(973814),u=c(n(922659)),l=c(n(247001)),s=c(n(762530));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){var t=e.checked,n=o.PromotionalEmailOptInExperiment.useExperiment({})[0];a.useEffect((function(){o.PromotionalEmailOptInExperiment.trackExposure({})}),[]);a.useEffect((function(){n.enabled&&(0,
i.setPromoEmailConsentEnabled)(n.enabled)}),[n.enabled]);return n.enabled?f(u.default,{value:t,subText:l.default.Messages.PROMOTIONAL_EMAIL_OPT_IN_CONSENT,onChange:i.setPromoEmailConsentChecked,marginTopStyle:s.default.marginTop8,muted:!0}):null}},898460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.formatUsername=function(e){return u.apply(this,arguments)};var r,a=(r=n(922629))&&r.__esModule?r:{default:r};function o(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,l,"next",e)}function l(e){o(i,r,a,u,l,"throw",e)}u(void 0)}))}}function u(){return(u=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return a.default.getSetting("USERNAME_PREFIX","");case 3:e.t0=e.sent;e.t1=t
;return e.abrupt("return",e.t0+e.t1);case 8:e.prev=8;e.t2=e.catch(0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},590886:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.removeAccount=function(e){o.default.dispatch({type:c.ActionTypes.MULTI_ACCOUNT_REMOVE_ACCOUNT,userId:e})};t.switchAccount=function(e){var t=r.default.getToken(e);if(null==t){o.default.dispatch({type:c.ActionTypes.MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE,userId:e});return}o.default.dispatch({type:c.ActionTypes.LOGOUT,isSwitchingAccount:!0});i.default.loginToken(t,!0);(0,u.transitionTo)(c.Routes.ME)};t.validateMultiAccountTokens=function(){var e=l.default.getId();s.default.getUsers().forEach(function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var i,u,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.id;if(u=r.default.getToken(i)){t.next=5;break}o.default.dispatch({
type:c.ActionTypes.MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE,userId:i});return t.abrupt("return");case 5:o.default.dispatch({type:c.ActionTypes.MULTI_ACCOUNT_VALIDATE_TOKEN_REQUEST,userId:i});t.prev=6;t.next=9;return a.default.get({url:c.Endpoints.ME,headers:{authorization:u},retries:3});case 9:l=t.sent;t.next=17;break;case 12:t.prev=12;t.t0=t.catch(6);s=401===(null===t.t0||void 0===t.t0?void 0:t.t0.status)||403===(null===t.t0||void 0===t.t0?void 0:t.t0.status);o.default.dispatch({type:s?c.ActionTypes.MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE:c.ActionTypes.MULTI_ACCOUNT_VALIDATE_TOKEN_SUCCESS,userId:i});return t.abrupt("return");case 17:o.default.dispatch({type:e===i?c.ActionTypes.CURRENT_USER_UPDATE:c.ActionTypes.USER_UPDATE,user:l.body});o.default.dispatch({type:c.ActionTypes.MULTI_ACCOUNT_VALIDATE_TOKEN_SUCCESS,userId:i});case 19:case"end":return t.stop()}}),t,null,[[6,12]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){
f(o,r,a,i,u,"next",e)}function u(e){f(o,r,a,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}())};var r=d(n(653795)),a=d(n(118915)),o=d(n(636602)),i=d(n(939949)),u=n(139982),l=d(n(423046)),s=d(n(915574)),c=n(770348);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}},393742:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.useMultiAccountUsers=function(){var e=(0,a.useStateFromStoresObject)([u.default],(function(){return{isLoading:u.default.getIsValidatingUsers(),multiAccountUsers:u.default.getUsers()}}));r.useEffect((function(){o.default.wait((function(){i.validateMultiAccountTokens()}))}),[]);return e};var r=c(n(667294)),a=n(536211),o=l(n(636602)),i=c(n(590886)),u=l(n(915574));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap
;return(s=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}},165635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=h;v(n(667294));var r,a=n(47354),o=f(n(185948)),i=f(n(956117)),u=v(n(72840)),l=f(n(776360)),s=v(n(72785)),c=f(n(247001)),d=f(n(11274));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{
default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e){var t=e.onDismiss;(0,o.default)({type:a.ImpressionTypes.MODAL,name:a.ImpressionNames.MULTI_ACCOUNT_SWITCH_LANDING});return m(u.default,{className:d.default.chooseAccountAuthBox
},void 0,m(u.Title,{},void 0,c.default.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT),m(l.default,{className:d.default.chooseAccountHelpText,size:l.default.Sizes.SIZE_16,color:l.default.Colors.HEADER_SECONDARY},void 0,c.default.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT_HELPER),m(s.default,{actionText:c.default.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN,onAction:function(e){e===s.MultiAccountActionType.LOGIN_REQUIRED&&t()}}),m("div",{className:d.default.actions},void 0,m(i.default,{className:d.default.chooseAccountButton,look:i.default.Looks.LINK,color:i.default.Colors.PRIMARY,onClick:t,size:i.default.Sizes.MEDIUM},void 0,m(l.default,{},void 0,c.default.Messages.SWITCH_ACCOUNTS_ADD_AN_ACCOUNT_BUTTON))))}h.displayName="ChooseAccountAuthBox"},72785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MultiAccountActionType=void 0;t.default=w
;var r,a,o=M(n(667294)),i=C(n(294184)),u=n(536211),l=C(n(939949)),s=n(378158),c=C(n(145122)),d=n(199649),f=C(n(759027)),p=C(n(728429)),v=C(n(956117)),m=C(n(80828)),h=C(n(775803)),_=C(n(628551)),g=C(n(776360)),E=C(n(308920)),y=M(n(590886)),N=n(915574),I=n(393742),T=n(770348),O=n(474477),S=C(n(247001)),A=C(n(381013));function C(e){return e&&e.__esModule?e:{default:e}}function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}function b(e,t,n,a){
r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}t.MultiAccountActionType=a;!function(e){e[e.LOGIN_REQUIRED=0]="LOGIN_REQUIRED";e[e.SWITCHED=1]="SWITCHED";e[e.REMOVED=2]="REMOVED"}(a||(t.MultiAccountActionType=a={}));function P(e){var t,n=e.actionText,r=e.user,o=e.onAction,m=(0,u.useStateFromStores)([p.default],(function(){return p.default.getCurrentUser()})),I=new f.default(r),C=(null==m?void 0:m.id)===I.id,R=r.tokenStatus===N.MultiAccountTokenStatus.INVALID;var M=null;C?M=b(g.default,{size:g.default.Sizes.SIZE_14,strong:!0,className:A.default.hintText},void 0,S.default.Messages.SWITCH_ACCOUNTS_ACTIVE_ACCOUNT):R&&(M=b(g.default,{
size:g.default.Sizes.SIZE_14,strong:!0,color:g.default.Colors.STATUS_RED},void 0,S.default.Messages.SWITCH_ACCOUNTS_INVALID_TOKEN));return b("div",{className:A.default.accountCard},void 0,b("div",{className:A.default.userDetails},void 0,b(_.default,{src:I.getAvatarURL(void 0,40),size:_.default.Sizes.SIZE_40,"aria-label":r.username}),b("div",{className:(0,i.default)(A.default.usernameSection,(t={},t[A.default.hasActionMaxWidth]=!C,t))},void 0,b("div",{className:A.default.username},void 0,b(g.default,{size:g.default.Sizes.SIZE_16,color:g.default.Colors.HEADER_PRIMARY,strong:!0,className:A.default.textOverflow},void 0,I.toString()),b(g.default,{color:g.default.Colors.HEADER_SECONDARY,strong:!1},void 0,"#"+I.discriminator)),M),b("div",{className:A.default.userActions},void 0,!C&&b(v.default,{onClick:function(){if(R)o(a.LOGIN_REQUIRED,r.id);else{E.default.track(T.AnalyticEvents.MULTI_ACCOUNT_SWITCH_ATTEMPT,{location:{section:T.AnalyticsSections.MANAGE_ACCOUNTS_MODAL}});y.switchAccount(r.id)
;o(a.SWITCHED,r.id)}},color:v.default.Colors.GREY},void 0,R?S.default.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN:n),b(v.default,{className:A.default.userActionMenu,onClick:function(e){(0,s.openContextMenu)(e,(function(e){var t=e.onSelect;return b(c.default,{"aria-label":S.default.Messages.SWITCH_ACCOUNTS_MANAGE_ACCOUNT,navId:"manage-multi-account",onClose:s.closeContextMenu,onSelect:t},void 0,b(d.MenuItem,{id:"remove-account",label:S.default.Messages.SWITCH_ACCOUNTS_REMOVE_ACCOUNT,action:function(){!function(){l.default.logout(null,r.id).finally((function(){y.removeAccount(r.id)}));var e={};m?e.section=T.AnalyticsSections.MANAGE_ACCOUNTS_MODAL:e.page=T.PageAnalyticsLocations.LOGIN;E.default.track(T.AnalyticEvents.MULTI_ACCOUNT_ACCOUNT_REMOVE,{location:e});o(a.REMOVED,r.id)}();null!=t&&t()},color:O.MenuItemColor.DANGER}))}))},size:v.default.Sizes.ICON,look:v.default.Looks.BLANK,color:v.default.Colors.WHITE},void 0,b(h.default,{className:A.default.overflowMenuIcon})))))}
P.displayName="AccountCard";var L=b(m.default,{});function w(e){var t=e.actionText,n=e.onAction,r=(0,I.useMultiAccountUsers)(),a=r.isLoading,i=r.multiAccountUsers;return b("div",{className:A.default.list},void 0,a?L:i.map((function(e,r){return o.createElement(o.Fragment,null,b(P,{user:e,actionText:t,onAction:n},e.id),i.length-1!==r&&b("div",{role:"separator",className:A.default.separator}))})))}w.displayName="MultiAccountsList"},520310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setNewUser=function(e){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_NEW_USER,newUserType:e})}))};t.setNewUserFlowCompleted=function(){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_COMPLETE})}))};var r,a=(r=n(636602))&&r.__esModule?r:{default:r},o=n(770348)},754949:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;t.NewUserTypes=t.NUF_NOTIFICATION_MODAL_KEY=t.NUF_INTENT_MODAL_KEY=t.NUF_EMAIL_CONNECTION_MODAL_KEY=t.NUF_DISCOVERABILITY_MODAL_KEY=t.IntentHomeAnalytics=void 0;var n;t.NewUserTypes=n;!function(e){e[e.MARKETING_UNCLAIMED=0]="MARKETING_UNCLAIMED";e[e.INVITE_UNCLAIMED=1]="INVITE_UNCLAIMED";e[e.ORGANIC_REGISTERED=2]="ORGANIC_REGISTERED";e[e.ORGANIC_REGISTERED_GUILD_TEMPLATE=3]="ORGANIC_REGISTERED_GUILD_TEMPLATE"}(n||(t.NewUserTypes=n={}));t.NUF_NOTIFICATION_MODAL_KEY="nuf-notification-modal-key";t.NUF_INTENT_MODAL_KEY="nuf-intent-modal-key";t.NUF_DISCOVERABILITY_MODAL_KEY="nuf-discoverability-modal-key";t.NUF_EMAIL_CONNECTION_MODAL_KEY="nuf-email-connection-modal-key";t.IntentHomeAnalytics={FLOW_TYPE:"Intent Home Guide",STEP_INTENT_HOME:"Intent Home",STEP_GUILD_CREATE:"Create Guild",STEP_GUILD_JOIN:"Join Guild",STEP_FRIEND_ADD:"Add Friend",STEP_MESSAGES:"Messages",STEP_UNKNOWN:"Unknown"}},98838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;t.PhoneOrEmailSelectorForceMode=void 0;t.getPhoneOrEmail=function(e){return/^\+\d/.test(e)?n.PHONE:n.EMAIL};t.shouldShowCountryCodeSelector=function(e,t){if(e===n.PHONE)return!(a=t,a.startsWith("+"));var a;if(e===n.EMAIL)return!1;if(t.length<3)return!1;return r.test(t)};var n;t.PhoneOrEmailSelectorForceMode=n;!function(e){e.PHONE="phone";e.EMAIL="email"}(n||(t.PhoneOrEmailSelectorForceMode=n={}));var r=/^[-() \d]+$/},864062:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=u(n(536211)),o=u(n(636602)),i=n(497806);n(770348);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}var s=(0,i.getDefaultCountryCode)();function c(e){var t,n=e.countryCode;null!=n&&(s=null!==(t=(0,i.getCountryCodeByAlpha2)(n))&&void 0!==t?t:(0,i.getDefaultCountryCode)())}var d=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;l(e,t)
}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(e){null!=e&&(r=e.selectedCountryCode)};n.getState=function(){return{selectedCountryCode:r}};n.getCountryCode=function(){return null!=r?r:s};return t}(a.default.PersistedStore);d.persistKey="PhoneStore";var f=new d(o.default,{PHONE_SET_COUNTRY_CODE:function(e){var t=e.countryCode;r=t},CONNECTION_OPEN:c,SET_LOCATION_METADATA:c});t.default=f},980096:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=E;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r
}(n(667294)),o=m(n(294184)),i=n(248088),u=n(536211),l=m(n(820682)),s=m(n(235879)),c=m(n(16941)),d=m(n(160629)),f=m(n(947472)),p=m(n(334141)),v=m(n(270278));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function _(){_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return _.apply(this,arguments)}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e){
var t=e.show,n=e.alpha2,r=e.countryCode,m=(0,u.useStateFromStores)([s.default],(function(){return s.default.useReducedMotion})),h=a.useRef(null),E=a.useState(0),y=E[0],N=E[1],I=a.useState(!1),T=I[0],O=I[1];a.useEffect((function(){function e(){var e,n;N(t&&null!==(e=null===(n=h.current)||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==e?e:0)}e();window.addEventListener("resize",e);return function(){return window.removeEventListener("resize",e)}}),[t,n,r]);var S=(0,i.useSpring)({width:y+"px",immediate:m,onStart:function(){O(!0)},onRest:function(){O(!1)}});return g(d.default,{position:d.default.Positions.TOP,renderPopout:function(e){return g(p.default,{className:v.default.popout,onClick:function(t){return function(e,t){f.default.setCountryCode(l.default[e]);t()}(t,e.closePopout)}})}},void 0,(function(e){var u;return g("div",{className:(0,o.default)(v.default.outerContainer,(u={},u[v.default.hidden]=!(t||T),u))},void 0,g(i.animated.div,{className:v.default.container,style:S
},void 0,a.createElement("div",{className:v.default.innerContainer,ref:h},a.createElement(c.default,_({},e,{className:v.default.countryCode}),n," ",r),g("div",{className:v.default.separator}))))}))}E.displayName="CountrySelector"},50459:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=m;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=f(n(294184)),i=f(n(279950)),u=n(688388),l=n(98838),s=f(n(980096)),c=f(n(596964)),d=f(n(572519));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null
;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(e){var t,n=e.alpha2,r=e.countryCode,f=e.forceMode,p=e.label,m=e.error,h=e.className,_=e.required,g=e.value,E=e.setRef,y=e.placeholder,N=e.autoFocus,I=e.maxLength,T=e.spellCheck,O=e.autoComplete,S=e.onChange,A=e.inputClassName,C=a.useState(!1),R=C[0],M=C[1],b=(0,l.shouldShowCountryCodeSelector)(f,g);return v(u.FormItem,{title:p,error:m,className:h,required:_},void 0,v("div",{className:(0,o.default)(d.default.input,c.default.input,A,(t={},t[d.default.error]=null!=m,
t[d.default.focused]=R,t))},void 0,v(s.default,{show:b,alpha2:n,countryCode:r}),v(i.default,{name:"email",type:f===l.PhoneOrEmailSelectorForceMode.EMAIL?"email":"text",value:g,inputRef:E,placeholder:y,"aria-label":p,onChange:function(e){var t=(0,l.shouldShowCountryCodeSelector)(f,e)?r:"";S(e,t)},autoComplete:O,autoFocus:N,maxLength:I,spellCheck:T,className:c.default.inputWrapper,inputClassName:c.default.inputField,onFocus:function(){return M(!0)},onBlur:function(){return M(!1)}})))}m.displayName="PhoneOrEmailInput"},916417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=f;var r,a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null
;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),i=(r=n(468205))&&r.__esModule?r:{default:r},u=["width","height","color","foreground"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return s.apply(this,arguments)}function c(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=c("polygon",{
points:"0 0 24 0 24 24 0 24"});function f(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,l=e.color,f=void 0===l?"currentColor":l,p=e.foreground,v=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,u);return o.createElement("svg",s({},(0,i.default)(v),{width:n,height:a,viewBox:"0 0 24 24"}),c("g",{fill:"none",fillRule:"evenodd"},void 0,c("polygon",{className:p,fill:f,fillRule:"nonzero",points:"18.35 4.35 16 2 6 12 16 22 18.35 19.65 10.717 12"}),d))}f.displayName="LeftCaret"},217114:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.computeNonceProof=function(e,t){return h.apply(this,arguments)};t.decodeEncodedUserRecord=function(e,t){return _.apply(this,arguments)};t.decryptEncodedCiphertext=v;t.generateRsaKeyPair=function(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"
},!0,["decrypt"])};t.publicKeyFingerprint=function(e){return s.apply(this,arguments)};t.serializePublicKey=function(e){return l.apply(this,arguments)};t.sha256Digest=c;var r=o(n(441143)),a=o(n(759027));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,l,"next",e)}function l(e){i(o,r,a,u,l,"throw",e)}u(void 0)}))}}function l(){return(l=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,r.default)(null!=t.publicKey,"public key cannot be null");e.next=3;return window.crypto.subtle.exportKey("spki",t.publicKey);case 3:n=e.sent;return e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))));case 5:case"end":return e.stop()}}),e)
})))).apply(this,arguments)}function s(){return(s=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,r.default)(null!=t.publicKey,"public key cannot be null");e.next=3;return window.crypto.subtle.exportKey("spki",t.publicKey);case 3:n=e.sent;return e.abrupt("return",c(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return(d=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return window.crypto.subtle.digest({name:"SHA-256"},t);case 2:n=e.sent;return e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,""));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}
function p(e,t){(0,r.default)(null!=e.privateKey,"private key cannot be null");return window.crypto.subtle.decrypt({name:"RSA-OAEP",hash:"SHA-256"},e.privateKey,t)}function v(e,t){return m.apply(this,arguments)}function m(){return(m=u(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new TextDecoder;e.next=3;return p(t,f(n));case 3:a=e.sent;return e.abrupt("return",r.decode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=u(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return p(t,f(n));case 2:r=e.sent;return e.abrupt("return",c(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=u(regeneratorRuntime.mark((function e(t,n){var r,o,i,u,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2
;return v(t,n);case 2:n=e.sent;r=/^(\d+):(\d{4}):([a-zA-Z0-9_]+):(.*)$/;if(null!=(o=n.match(r))){e.next=7;break}throw new Error("Invalid encoded user record.");case 7:i=o[1],u=o[2],l=o[3],s=o[4];return e.abrupt("return",new a.default({id:i,discriminator:u,avatar:"0"===l?null:l,username:s}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},697694:(e,t,n)=>{e.exports=n.p+"87f8416faec0691b96525d0bb3027809.svg"},148267:(e,t,n)=>{e.exports=n.p+"0f4d1ff76624bb45a3fee4189279ee92.svg"}}]);
//# sourceMappingURL=4e083341fd14518c6ae9.js.map